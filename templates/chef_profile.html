<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的頁面 - 味你而煮</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/ChefUnOrder.css') }}">
</head>
<body>
    <div class="navbar">
        <div class="site-name">味你而煮</div>
        <div class="nav-links">
            <a href="{{ url_for('chef_dashboard') }}">首頁</a>
            <a href="{{ url_for('chef_profile') }}">我的頁面</a>
            <a href="{{ url_for('chef_pending_orders') }}">待接單訂單</a>

            <!-- 新增下拉選單 -->
            <div class="dropdown">
                <button class="dropdown-btn" onclick="toggleDropdown()">我的訂單 ▾</button>
                <div class="dropdown-content" id="orderDropdown">
                    <a href="{{ url_for('chef_accepted_orders') }}">待完成訂單</a>
                    <a href="{{ url_for('chef_completed_orders') }}">已完成訂單</a>
                    <a href="{{ url_for('chef_negotiating_orders') }}">議價中訂單</a>
                    <a href="{{ url_for('chef_cancelled_orders') }}">已取消訂單</a>
                </div>
            </div>

            <a href="#">客服聯絡</a>
        </div>
        <div class="user-info">
            {% if user %}
            <img
                src="{{ avatar_url }}"
                alt="頭像"
                class="avatar"
            />
            <div class="user-text">
                <div class="name">{{ user.name }}</div>
                <div class="email">{{ user.email }}</div>
            </div>
            
            <div class="settings-icon" onclick="toggleSettingsModal()"></div>
            {% else %}
            <a href="{{ url_for('login') }}">登入/註冊</a>
            {% endif %}
        </div>
    </div>

    <div style="padding: 40px 20px; background-color: #FFF5DA; min-height: calc(100vh - 80px);">
        <div style="max-width: 800px; margin: 0 auto;">
            <div style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                <h1 style="color: #B3811C; text-align: center; margin-bottom: 30px; font-size: 28px;">我的個人資料</h1>
                
                <div style="text-align: center; margin-bottom: 30px;">
                    <div style="width: 120px; height: 120px; border-radius: 50%; background: #f6c25f; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 48px;">
                        👨‍🍳
                    </div>
                    <h2 style="color: #5b4636; margin: 0;">{{ current_user.email }}</h2>
                    <p style="color: #666; margin: 5px 0 0 0;">廚師</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background: #fff3e0; padding: 20px; border-radius: 10px; border-left: 4px solid #f6c25f;">
                        <h3 style="color: #B3811C; margin-bottom: 10px;">基本資訊</h3>
                        <p style="margin: 5px 0; color: #666;"><strong>電子郵件：</strong>{{ current_user.email }}</p>
                        <p style="margin: 5px 0; color: #666;"><strong>註冊日期：</strong>{{ current_user.created_at.strftime('%Y/%m/%d') if current_user.created_at else '未知' }}</p>
                        <p style="margin: 5px 0; color: #666;"><strong>帳戶狀態：</strong>
                            {% if current_user.is_verified %}
                                <span style="color: #4CAF50;">✅ 已驗證</span>
                            {% else %}
                                <span style="color: #f44336;">❌ 未驗證</span>
                            {% endif %}
                        </p>
                    </div>

                    <div style="background: #fff3e0; padding: 20px; border-radius: 10px; border-left: 4px solid #4CAF50;">
                        <h3 style="color: #B3811C; margin-bottom: 10px;">快速功能</h3>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <a href="{{ url_for('chef_pending_orders') }}" style="background: #f6c25f; color: white; padding: 10px 15px; border-radius: 8px; text-decoration: none; text-align: center;">查看待接訂單</a>
                            <a href="{{ url_for('chef_accepted_orders') }}" style="background: #4CAF50; color: white; padding: 10px 15px; border-radius: 8px; text-decoration: none; text-align: center;">我的訂單</a>
                            <a href="#" style="background: #888; color: white; padding: 10px 15px; border-radius: 8px; text-decoration: none; text-align: center;">編輯資料</a>
                        </div>
                    </div>
                </div>

                <div style="background: #f9f9f9; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="color: #B3811C; margin-bottom: 15px;">使用提示</h3>
                    <p style="color: #666; line-height: 1.6; margin: 0;">
                        在「待接單訂單」查看所有可接的新訂單<br>
                        接單後可在「我的訂單」中管理進度<br>
                        及時回應客戶需求，提升服務品質<br>
                        如有問題請聯繫客服團隊
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleDropdown() {
            document.getElementById("orderDropdown").classList.toggle("show");
        }

        // 點擊其他地方時關閉下拉選單
        window.onclick = function (event) {
            if (!event.target.matches('.dropdown-btn')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }
    </script>
</body>
</html> 