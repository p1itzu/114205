<!DOCTYPE html>

<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的訂單</title>
    <link rel="stylesheet" href="/static/css/my-order.css" />
    <link rel="stylesheet" href="/static/css/notification.css" />
</head>
<body>
   <div class="navbar">
        <div class="site-name">味你而煮</div>
        <div class="nav-links">
            <a href="{{ url_for('index') }}">首頁</a>
            {% if user %}
            <a href="CookingMethod.html">料理方式建議</a>
            <a href="{{ url_for('order_step1') }}">新增訂單</a>
            <a href="{{ url_for('customer_order_list') }}">我的訂單</a>
            <a href="#" onclick="toggleNotification(); return false;">通知中心</a>
            {% else %}
            <a href="{{ url_for('index') }}">關於我們</a>
            <a href="{{ url_for('index') }}">料理方式建議</a>
            <a href="{{ url_for('index') }}">常見問題</a>
            {% endif %}
        </div>
        <div class="user-info">
            {% if user %}
            <img
                src="{{ avatar_url }}"
                alt="頭像"
                class="avatar"
            />
            <div class="user-text">
                <div class="name">{{ user.name }}</div>
                <div class="email">{{ user.email }}</div>
            </div>
            
            <div class="settings-icon" onclick="toggleSettingsModal()"></div>
            {% else %}
            <a href="{{ url_for('login') }}">登入/註冊</a>
            {% endif %}
        </div>
    </div>

<br>
<div class="maintext">所有訂單</div>
<div class="filter-buttons">
    <button class="filter-btn active" data-status="all">全部</button>
    <button class="filter-btn" data-status="ongoing">進行中</button>
    <button class="filter-btn" data-status="completed">已完成</button>
    <button class="filter-btn" data-status="cancelled">已取消</button>
</div>
<div class="container">
    {% for order in orders %}
    <div class="order-card" data-status="all">
        <p class="order-num"><strong>訂單編號</strong><br>#{{ order.id }}</p>
        <p>
            菜單列表：<br>
            {% for dish in order.dishes %}
                {{ loop.index }}. {{ dish.dish_name }}<br>
            {% endfor %}
        </p>
        <div class="button-group">
            <button class="message-btn" onclick="openMessageBoard(this)">留言</button>
            <a href="{{ url_for('order_detail', order_id=order.id) }}" class="order-btn">查看詳細訂單資訊</a>
        </div>
    </div>
    {% endfor %}
</div>

<script src="/static/js/notification.js"></script>

</body>
</html>
