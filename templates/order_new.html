<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cactus+Classical+Serif&family=Noto+Sans+HK:wght@100..900&family=Noto+Serif+TC:wght@200..900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/reserve.css" />
    <link rel="stylesheet" href="/static/css/reserve2.css" />
    <link rel="stylesheet" href="/static/css/reserve3.css" />
    <link rel="stylesheet" href="/static/css/reserve4.css" />
    <link rel="stylesheet" href="/static/css/notification.css" />

    <title>新增訂單</title>

    <style>
        .wizard-step { display: none; }
        .wizard-step.active { display: block; }

        .progress-bar .step.active { background:#d19b2a; color:#fff; }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="site-name">味你而煮</div>
        <div class="nav-links">
            <a href="AfterLogin.html">首頁</a>
            <a href="#">料理方式建議</a>
            <a href="SearchChef.html">發送訂單</a>
            <a href="my-order.html">我的訂單</a>
            <a href="#" onclick="toggleNotification();return false;">通知中心</a>
        </div>
        <div class="user-info">
            <div class="username">11336012@ntub.edu.tw</div>
            <div class="settings-icon" onclick="toggleSettingsModal()"></div>
        </div>
    </div>

    <div class="notification-center" id="notificationCenter">
        <div class="notification-header">
            <span>通知中心</span>
            <button class="clear-all" onclick="clearAllNotifications()">清空通知</button>
        </div>
        <ul class="notification-list" id="notificationList"></ul>
    </div>

    <main id="wizard">
        <section class="wizard-step active" id="step-1">
            <div class="content">
                <div class="section">
                    <div class="section2">
                        <h3>Step1 - 預訂資訊</h3>
                        <br>
                    </div>
                    <form class="order-form">
                        <label for="date">日期 (需提早三天以上)</label>
                        <input type="date" id="date" required>
                        <br>
                        <br>

                        <label for="time">時間</label>
                        <input type="time" id="time" required>
                        <br>
                        <br>

                        <label>取餐方式</label>
                        <div>
                            <button class="button" type="button" id="pickup" onclick="selectDelivery('pickup')">自取</button>
                            <button class="button" type="button" id="delivery" onclick="selectDelivery('delivery')">外送</button>
                        </div>


                        <div>
                            <label for="address">地址</label>
                            <input type="text" id="address" placeholder="請填寫完整外送地址">
                        </div>
                        <br>

                        <!-- <button class="save-button" type="submit" onclick="location.href='reserve2.html'">儲存！</button> -->
                        <div class="button-area">
                            <button class="next-btn" type="button">下一步</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section class="wizard-step" id="step-2">
            <div class="content">
                <div class="section">
                    <div class="section2">
                        <h3>Step2 - 菜單填寫</h3>
                        <br>
                    </div>

                    <table id="menu-table">
                        <tr id="dish-section-1">
                            <td>
                                <div>
                                    <label for="food1" class="bold-text">第 1 道餐點</label>
                                    <br>
                                    <input type="text" id="dish-name" placeholder="請填寫餐點名稱">
                                </div>

                                <br>

                                <div class="custom-number-input">
                                    <label for="food1" class="bold-text">分量：</label>
                                    <input type="number" id="custom-number" min="1" max="100" step="1">
                                    <span>人份</span>
                                </div>

                                <br>


                                <div>
                                    <label for="food1" class="bold-text">需要的食材</label>
                                    <br>
                                    <input type="text" id="ingredients" placeholder="請填寫需要的食材">
                                </div>

                                <br>
                                
                                <div>
                                    <label for="food1" class="bold-text">特製作法</label>
                                    <br>
                                    <button class="cookingmethod-button" type="button" data-value="紅燒">紅燒</button>
                                    <button class="cookingmethod-button" type="button" data-value="清蒸">清蒸</button>
                                    <button class="cookingmethod-button" type="button" data-value="油煎">油煎</button>
                                    <button class="cookingmethod-button" type="button" data-value="川燙">川燙</button>
                                    <input type="text" id="special" placeholder="請提供您需要的特製作法給廚師">
                                </div>

                            </td>

                            <td>
                                <div>
                                    <label for="food1" class="bold-text">調味</label>
                                </div>


                                <div class="salinity-container">
                                    <label for="food1">鹹度：</label>
                                    <button class="salinity-button" type="button" data-value="極淡">極淡</button>
                                    <button class="salinity-button" type="button" data-value="清淡">清淡</button>
                                    <button class="salinity-button" type="button" data-value="標準">標準</button>
                                    <button class="salinity-button" type="button" data-value="濃郁">濃郁</button>
                                </div>

                                <div class="spiciness-container">
                                    <label for="food1">辣度：</label>
                                    <button class="spiciness-button" type="button" data-value="不辣">不辣</button>
                                    <button class="spiciness-button" type="button" data-value="小辣">小辣</button>
                                    <button class="spiciness-button" type="button" data-value="中辣">中辣</button>
                                    <button class="spiciness-button" type="button" data-value="大辣">大辣</button>
                                </div>

                                <div class="oillevel-container">
                                    <label for="food1">油度：</label>
                                    <button class="oillevel-button" type="button" data-value="低油">低油</button>
                                    <button class="oillevel-button" type="button" data-value="少油">少油</button>
                                    <button class="oillevel-button" type="button" data-value="標準">標準</button>
                                </div>

                                <br>

                                <div>
                                    <label for="food1" class="bold-text">客製備註</label>
                                    <br>
                                    <input type="text" id="customized" placeholder="請填寫需要的備註事項">
                                </div>

                                <br>

                                <div class="button-container">
                                    <button class="back" type="submit" onclick="goToPreviousDish()">⭠</button>
                                    <button class="next" type="submit" onclick="goToNextDish()">⭢</button>
                                    <button class="delete-button" type="submit" onclick="deleteDish()">刪除</button>
                                    <button class="next-button" type="button" onclick="updateDish()">新增下一道</button>
                                    <button class="save-button" type="submit"
                                        onclick="location.href='reserve3.html'">菜單確認</button>

                                </div>

                                <div class="button-area">
                                    <button class="prev-btn" type="button">上一步</button>
                                    <button class="next-btn" type="button">下一步</button>
                                </div>
                            </td>
                        </tr>
                    </table>
                    </form>
                </div>
            </div>
        </section>

        <section class="wizard-step" id="step-3">
            <div class="content">
                <div class="section">
                    <div class="section2">
                        <h3>Step3 - 總菜單確認</h3>
                        <br>
                    </div>

                    <table>
                        <tr>
                            <div class="meal-container">
                                <ul class="meal-list">
                                    <li>
                                        香煎奶油鱸魚
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        蒜香白酒蛤蜊義大利麵
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        泰式打拋豬飯
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        麻辣鴨血臭豆腐
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        韓式部隊鍋
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        照燒雞腿丼飯
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        酥炸金沙豆腐
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        香草奶油燉飯
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        蒙古烤肉拼盤
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                    <li>
                                        起司瀑布漢堡
                                        <button class="edit-btn" onclick="location.href='reserve2-change.html'">修改</button>
                                        <button class="delete-btn" onclick="deleteDish()">刪除</button>
                                    </li>
                                </ul>
                            </div>

                            <br>
                            <button class="prev-btn" type="button">上一步</button>
                            <button class="next-btn" type="button">下一步</button>
                            </td>
                        </tr>
                    </table>
                    </form>
                </div>
            </div>
        </section>

        <!-- ========= Step 4 ========= -->
        <section class="wizard-step" id="step-4">
            <!-- ↓↓ 將原 reserve4.html <div class="content">…</div> 貼進來 ↓↓ -->
            <div class="content">
                <div class="section">
                    <div class="section2"><h3>Step4 - 訂單確認</h3><br></div>
                    <!-- 原本 step 4 的明細 / 付款方式…（直接搬過來） -->
                    <!-- 省略 … -->
                    <div class="button-area">
                        <button class="prev-btn" type="button">← 上一步</button>
                        <button class="submit-btn" type="button">送出訂單</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="progress-bar">
        <div class="step active" data-step="1">第1步</div>
        <div class="line"></div>
        <div class="step" data-step="2">第2步</div>
        <div class="line"></div>
        <div class="step" data-step="3">第3步</div>
        <div class="line"></div>
        <div class="step" data-step="4">第4步</div>
    </div>

    <script src="/static/js/notification.js"></script>
    <script>
        const wizard       = document.getElementById('wizard');
        const steps        = Array.from(document.querySelectorAll('.wizard-step'));
        const progressDots = Array.from(document.querySelectorAll('.progress-bar .step'));
        let currentStep    = 0;

        updateUI();

        wizard.addEventListener('click', (e) => {
            if (e.target.matches('.next-btn'))  { gotoStep(currentStep + 1); }
            if (e.target.matches('.prev-btn'))  { gotoStep(currentStep - 1); }
            if (e.target.matches('.submit-btn')) { submitOrder(); }
        });

        function gotoStep(idx) {
            if (idx < 0 || idx >= steps.length) return;
            currentStep = idx;
            updateUI();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateUI() {
            steps.forEach((stepEl, i) => {
                stepEl.classList.toggle('active', i === currentStep);
            });
            progressDots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentStep);
            });
        }

        function selectDelivery(type) {
            const pickupBtn = document.getElementById('pickup');
            const deliveryBtn = document.getElementById('delivery');

            pickupBtn.classList.remove('active');
            deliveryBtn.classList.remove('active');
            document.getElementById(type).classList.add('active');

            localStorage.setItem('selectedDelivery', type);
        }

        function submitOrder() {
            alert('訂單已送出，感謝！');
        }
    </script>
</body>
</html>
